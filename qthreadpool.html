<html>
<head>
<title>QThreadPool Class Reference</title>
<style>h3.fn,span.fn { margin-left: 1cm; text-indent: -1cm }
a:link { color: #004faf; text-decoration: none }
a:visited { color: #672967; text-decoration: none }
td.postheader { font-family: sans-serif }
tr.address { font-family: sans-serif }
body { background: #ffffff; color: black; }
</style>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr></tr>
<td align="left" valign="top" width="32"><img align="left" border="0" height="32" src="images/rb-logo.png" tppabs="http://pyqt4doc.appspot.com/images/rb-logo.png" width="32"></td>
<td width="1">  </td>
<td class="postheader" valign="center">
<a href="index.html" tppabs="http://pyqt4doc.appspot.com/index.html"><font color="#004faf">Home</font></a> · <a href="index.htm" tppabs="http://pyqt4doc.appspot.com/classes.html"><font color="#004faf">All Classes</font></a> · <a href="index.htm" tppabs="http://pyqt4doc.appspot.com/modules.html"><font color="#004faf">Modules</font></a>  · <a href="qss.html"><font color="#004faf">QSS HELP</font></a>  · <a href="qtqss.html"><font color="#004faf">QSS 案例</font></a> · <a href="HTTP://VER007.COM"><font color="#004faf">VER007 HOME</font></a> 
</td>
</table>
<h1 align="center">QThreadPool Class Reference<br><sup><sup>[<a href="index.htm" tppabs="http://pyqt4doc.appspot.com/qtcore.html">QtCore</a> module]</sup></sup>
</h1>
<p>该QThreadPool类管理QThreads的集合。<a href="#details">More...</a></p>

<p>继承<a href="qobject.html" tppabs="http://pyqt4doc.appspot.com/qobject.html">QObject</a>。</p>
<h3>Methods</h3>
<ul>
<li>
<div class="fn"></div>
<b><a href="qthreadpool.html#QThreadPool" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#QThreadPool">__init__</a></b> (<i>self</i>, QObject <i>parent</i> = None)</li>
<li>
<div class="fn"></div>int <b><a href="qthreadpool.html#activeThreadCount" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#activeThreadCount">activeThreadCount</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>int <b><a href="qthreadpool.html#expiryTimeout" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#expiryTimeout">expiryTimeout</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>int <b><a href="qthreadpool.html#maxThreadCount" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#maxThreadCount">maxThreadCount</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qthreadpool.html#releaseThread" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#releaseThread">releaseThread</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qthreadpool.html#reserveThread" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#reserveThread">reserveThread</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qthreadpool.html#setExpiryTimeout" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#setExpiryTimeout">setExpiryTimeout</a></b> (<i>self</i>, int <i>expiryTimeout</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qthreadpool.html#setMaxThreadCount" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#setMaxThreadCount">setMaxThreadCount</a></b> (<i>self</i>, int <i>maxThreadCount</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qthreadpool.html#start" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#start">start</a></b> (<i>self</i>, QRunnable <i>runnable</i>, int <i>priority</i> = 0)</li>
<li>
<div class="fn"></div>bool <b><a href="qthreadpool.html#tryStart" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#tryStart">tryStart</a></b> (<i>self</i>, QRunnable <i>runnable</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qthreadpool.html#waitForDone" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#waitForDone">waitForDone</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>bool <b><a href="qthreadpool.html#waitForDone-2" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#waitForDone-2">waitForDone</a></b> (<i>self</i>, int <i>msecs</i>)</li>
</ul>
<h3>Static Methods</h3>
<ul><li>
<div class="fn"></div>QThreadPool <b><a href="qthreadpool.html#globalInstance" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#globalInstance">globalInstance</a></b> ()</li></ul>
<a name="details"></a><div class="ad">
<hr>
 
</div>
<h2>Detailed Description</h2>
<p>该QThreadPool类管理QThreads的集合。</p>
<p>QThreadPool管理及recyles个人<a href="qthread.html" tppabs="http://pyqt4doc.appspot.com/qthread.html">QThread</a>对象以帮助减少在使用线程的程序线程的创建成本。每个Qt的应用程序有一个全局QThreadPool对象，它可以通过调用访问<a href="qthreadpool.html#globalInstance" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#globalInstance">globalInstance</a>（ ） 。</p>
<p>要使用一个QThreadPool线程，子类<a href="qrunnable.html" tppabs="http://pyqt4doc.appspot.com/qrunnable.html">QRunnable</a>并实现run （ ）虚函数。然后创建类的一个对象，并把它传递给<a href="qthreadpool.html#start" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#start">QThreadPool.start</a>（ ） 。</p>
<pre class="cpp">
 <span class="keyword">class</span> HelloWorldTask : <span class="keyword">public</span> <span class="type"><a href="qrunnable.html" tppabs="http://pyqt4doc.appspot.com/qrunnable.html">QRunnable</a></span>
 {
     <span class="type">void</span> run()
     {
         <a href="index.htm#qDebug" tppabs="http://pyqt4doc.appspot.com/qtcore.html#qDebug">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">"Hello world from thread"</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="type"><a href="qthread.html" tppabs="http://pyqt4doc.appspot.com/qthread.html">QThread</a></span><span class="operator">.</span>currentThread();
     }
 }

 HelloWorldTask <span class="operator">*</span>hello <span class="operator">=</span> <span class="keyword">new</span> HelloWorldTask();
 <span class="comment">// QThreadPool takes ownership and deletes 'hello' automatically</span>
 <span class="type">QThreadPool</span><span class="operator">.</span><a href="qthreadpool.html#globalInstance" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#globalInstance">globalInstance</a>()<span class="operator">-</span><span class="operator">&gt;</span><a href="qthreadpool.html#start" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#start">start</a>(hello);
</pre>
<p>QThreadPool删除<a href="qrunnable.html" tppabs="http://pyqt4doc.appspot.com/qrunnable.html">QRunnable</a>自动默认。使用<a href="qrunnable.html#setAutoDelete" tppabs="http://pyqt4doc.appspot.com/qrunnable.html#setAutoDelete">QRunnable.setAutoDelete</a>（）来更改自动删除标志。</p>
<p>QThreadPool支持执行相同<a href="qrunnable.html" tppabs="http://pyqt4doc.appspot.com/qrunnable.html">QRunnable</a>不止一次被从内部调用tryStart （本）<a href="qrunnable.html#run" tppabs="http://pyqt4doc.appspot.com/qrunnable.html#run">QRunnable.run</a>（ ） 。如果autoDelete启用<a href="qrunnable.html" tppabs="http://pyqt4doc.appspot.com/qrunnable.html">QRunnable</a>当最后一个线程退出运行功能将被删除。调用<a href="qthreadpool.html#start" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#start">start</a>（）多次使用相同的<a href="qrunnable.html" tppabs="http://pyqt4doc.appspot.com/qrunnable.html">QRunnable</a>当autoDelete启用创造竞争条件，因此不推荐。</p>
<p>线程是未使用一定量的时间会过期。默认的到期超时为30000毫秒（ 30秒） 。这可以使用被改变<a href="qthreadpool.html#expiryTimeout-prop" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#expiryTimeout-prop">setExpiryTimeout</a>（ ） 。设置一个负的到期超时禁用届满机制。</p>
<p>Call <a href="qthreadpool.html#maxThreadCount-prop" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#maxThreadCount-prop">maxThreadCount</a>（ ）来查询所使用的最大线程数。如果需要，你可以更改该限制<a href="qthreadpool.html#maxThreadCount-prop" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#maxThreadCount-prop">setMaxThreadCount</a>（ ） 。默认<a href="qthreadpool.html#maxThreadCount-prop" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#maxThreadCount-prop">maxThreadCount</a>（）是<a href="qthread.html#idealThreadCount" tppabs="http://pyqt4doc.appspot.com/qthread.html#idealThreadCount">QThread.idealThreadCount</a>（ ） 。该<a href="qthreadpool.html#activeThreadCount-prop" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#activeThreadCount-prop">activeThreadCount</a>（ ）函数返回目前正在做的工作线程数。</p>
<p>该<a href="qthreadpool.html#reserveThread" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#reserveThread">reserveThread</a>（ ）函数保留一个线程外用。使用<a href="qthreadpool.html#releaseThread" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#releaseThread">releaseThread</a>（）时，你正在与线程完成的，以便它可以被重新使用。从本质上讲，这些功能暂时增加或减少活动线程数和执行耗时的操作是不可见的QThreadPool时是有用的。</p>
<p>注意， QThreadPool是用于管理线程一个低级别的类，见<a href="index.htm#run" tppabs="http://pyqt4doc.appspot.com/qtconcurrentrun.html#run">QtConcurrent.run</a>（）或其他<a href="index.htm" tppabs="http://pyqt4doc.appspot.com/threads-qtconcurrent.html">Qt Concurrent</a>API进行更高层次的替代品。</p>
<hr>
<h2>Method Documentation</h2>
<h3 class="fn">
<a name="QThreadPool"></a>QThreadPool.__init__ (<i>self</i>, <a href="qobject.html" tppabs="http://pyqt4doc.appspot.com/qobject.html">QObject</a> <i>parent</i> = None)</h3>
<p>该<i>parent</i>的说法，如果不是没有，原因<i>self</i>通过Qt的，而不是PyQt的拥有。</p>
<p>构造一个线程池与给定<i>parent</i>。</p>


<h3 class="fn">
<a name="activeThreadCount"></a>int QThreadPool.activeThreadCount (<i>self</i>)</h3>
<h3 class="fn">
<a name="expiryTimeout"></a>int QThreadPool.expiryTimeout (<i>self</i>)</h3>
<h3 class="fn">
<a name="globalInstance"></a><a href="qthreadpool.html" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html">QThreadPool</a> QThreadPool.globalInstance ()</h3>
<p>返回全局<a href="qthreadpool.html" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html">QThreadPool</a>实例。</p>


<h3 class="fn">
<a name="maxThreadCount"></a>int QThreadPool.maxThreadCount (<i>self</i>)</h3>
<h3 class="fn">
<a name="releaseThread"></a>QThreadPool.releaseThread (<i>self</i>)</h3>
<p>发布一个线程以前通过调用保留<a href="qthreadpool.html#reserveThread" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#reserveThread">reserveThread</a>（ ） 。</p>
<p><b>Note:</b>调用此函数之前没有预留一个线程暂时增加<a href="qthreadpool.html#maxThreadCount-prop" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#maxThreadCount-prop">maxThreadCount</a>（ ） 。当一个线程进入睡眠状态，等待更多的工作，让其他线程继续，这是很有用的。一定要调用<a href="qthreadpool.html#reserveThread" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#reserveThread">reserveThread</a>（ ）进行等待，从而使线程池可以维持正确的时<a href="qthreadpool.html#activeThreadCount-prop" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#activeThreadCount-prop">activeThreadCount</a>（ ） 。</p>
<p><b>See also</b> <a href="qthreadpool.html#reserveThread" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#reserveThread">reserveThread</a>（ ） 。</p>


<h3 class="fn">
<a name="reserveThread"></a>QThreadPool.reserveThread (<i>self</i>)</h3>
<p>准备一个线程，无视<a href="qthreadpool.html#activeThreadCount-prop" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#activeThreadCount-prop">activeThreadCount</a>（）和<a href="qthreadpool.html#maxThreadCount-prop" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#maxThreadCount-prop">maxThreadCount</a>（ ） 。</p>
<p>一旦你与线程，调用来完成<a href="qthreadpool.html#releaseThread" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#releaseThread">releaseThread</a>（）以允许它被重复使用。</p>
<p><b>Note:</b>此功能将随时增加活动线程的数量。这意味着，通过使用此功能，可以为<a href="qthreadpool.html#activeThreadCount-prop" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#activeThreadCount-prop">activeThreadCount</a>（ ）返回的值大于<a href="qthreadpool.html#maxThreadCount-prop" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#maxThreadCount-prop">maxThreadCount</a>（ ） 。</p>
<p><b>See also</b> <a href="qthreadpool.html#releaseThread" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#releaseThread">releaseThread</a>（ ） 。</p>


<h3 class="fn">
<a name="setExpiryTimeout"></a>QThreadPool.setExpiryTimeout (<i>self</i>, int <i>expiryTimeout</i>)</h3>
<h3 class="fn">
<a name="setMaxThreadCount"></a>QThreadPool.setMaxThreadCount (<i>self</i>, int <i>maxThreadCount</i>)</h3>
<h3 class="fn">
<a name="start"></a>QThreadPool.start (<i>self</i>, <a href="qrunnable.html" tppabs="http://pyqt4doc.appspot.com/qrunnable.html">QRunnable</a> <i>runnable</i>, int <i>priority</i> = 0)</h3>
<p>保留一个线程，并使用它来运行<i>runnable</i>，除非这个线程将会使当前线程数超过<a href="qthreadpool.html#maxThreadCount-prop" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#maxThreadCount-prop">maxThreadCount</a>（ ） 。在这种情况下，<i>runnable</i>被添加到一个运行队列来代替。该<i>priority</i>参数可以用来控制执行的运行队列的顺序。</p>
<p>需要注意的是线程池需要的所有权<i>runnable</i>如果<a href="qrunnable.html#autoDelete" tppabs="http://pyqt4doc.appspot.com/qrunnable.html#autoDelete">runnable-&gt;autoDelete()</a>返回True ，而<i>runnable</i>会后，由线程池自动删除<a href="qrunnable.html#run" tppabs="http://pyqt4doc.appspot.com/qrunnable.html#run">runnable-&gt;run()</a>回报。如果<a href="qrunnable.html#autoDelete" tppabs="http://pyqt4doc.appspot.com/qrunnable.html#autoDelete">runnable-&gt;autoDelete()</a>返回False，所有权<i>runnable</i>保持与来电者。注意，改变在自动删除<i>runnable</i>调用此函数后，会导致不确定的行为。</p>


<h3 class="fn">
<a name="tryStart"></a>bool QThreadPool.tryStart (<i>self</i>, <a href="qrunnable.html" tppabs="http://pyqt4doc.appspot.com/qrunnable.html">QRunnable</a> <i>runnable</i>)</h3>
<p>尝试保留一个线程来运行<i>runnable</i>。</p>
<p>如果没有可用的线程在调用的时候，那么这个函数不执行任何操作并返回False 。否则，<i>runnable</i>立即运行使用一个可用的线程，这个函数返回True。</p>
<p>需要注意的是线程池需要的所有权<i>runnable</i>如果<a href="qrunnable.html#autoDelete" tppabs="http://pyqt4doc.appspot.com/qrunnable.html#autoDelete">runnable-&gt;autoDelete()</a>返回True ，而<i>runnable</i>会后，由线程池自动删除<a href="qrunnable.html#run" tppabs="http://pyqt4doc.appspot.com/qrunnable.html#run">runnable-&gt;run()</a>回报。如果<a href="qrunnable.html#autoDelete" tppabs="http://pyqt4doc.appspot.com/qrunnable.html#autoDelete">runnable-&gt;autoDelete()</a>返回False，所有权<i>runnable</i>保持与来电者。注意，改变在自动删除<i>runnable</i>调用此函数后会导致不确定的行为。</p>


<h3 class="fn">
<a name="waitForDone"></a>QThreadPool.waitForDone (<i>self</i>)</h3>
<p>等待每一个线程退出并删除所有线程的线程池。</p>


<h3 class="fn">
<a name="waitForDone-2"></a>bool QThreadPool.waitForDone (<i>self</i>, int <i>msecs</i>)</h3>
<p>这个函数的重载<a href="qthreadpool.html#waitForDone" tppabs="http://pyqt4doc.appspot.com/qthreadpool.html#waitForDone">waitForDone</a>（ ） 。</p>
<p>最多等待<i>msecs</i>毫秒所有线程退出并删除所有线程的线程池。返回True如果被拆除的所有线程，否则返回False 。</p>
<p>此功能被引入Qt的4.8 。</p>
<address>
<div class="ad">
<br> 
<br><hr>
</div>
<div align="center"><table border="0" cellspacing="0" width="100%"><tr class="address">
<td align="left" width="25%">PyQt 4.10.3 for X11</td>
<td align="center" width="50%">Copyright © <a href="http://www.riverbankcomputing.com/">Riverbank Computing Ltd</a> and <a href="http://www.qtsoftware.com/">Nokia</a> 2012</td>
<td align="right" width="25%">Qt 4.8.5</td>
</tr></table></div>
</address>
</body>
</html>
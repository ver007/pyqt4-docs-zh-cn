<html>
<head>
<title>QSqlDatabase Class Reference</title>
<style>h3.fn,span.fn { margin-left: 1cm; text-indent: -1cm }
a:link { color: #004faf; text-decoration: none }
a:visited { color: #672967; text-decoration: none }
td.postheader { font-family: sans-serif }
tr.address { font-family: sans-serif }
body { background: #ffffff; color: black; }
</style>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr></tr>
<td align="left" valign="top" width="32"><img align="left" border="0" height="32" src="images/rb-logo.png" tppabs="http://pyqt4doc.appspot.com/images/rb-logo.png" width="32"></td>
<td width="1">  </td>
<td class="postheader" valign="center">
<a href="index.html" tppabs="http://pyqt4doc.appspot.com/index.html"><font color="#004faf">Home</font></a> · <a href="index.htm" tppabs="http://pyqt4doc.appspot.com/classes.html"><font color="#004faf">All Classes</font></a> · <a href="index.htm" tppabs="http://pyqt4doc.appspot.com/modules.html"><font color="#004faf">Modules</font></a>  · <a href="qss.html"><font color="#004faf">QSS HELP</font></a>  · <a href="qtqss.html"><font color="#004faf">QSS 案例</font></a> · <a href="HTTP://VER007.COM"><font color="#004faf">VER007 HOME</font></a> 
</td>
</table>
<h1 align="center">QSqlDatabase Class Reference<br><sup><sup>[<a href="index.htm" tppabs="http://pyqt4doc.appspot.com/qtsql.html">QtSql</a> module]</sup></sup>
</h1>
<p>该QSqlDatabase类表示一个到数据库的连接。<a href="#details">More...</a></p>

<h3>Methods</h3>
<ul>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#QSqlDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#QSqlDatabase">__init__</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#QSqlDatabase-2" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#QSqlDatabase-2">__init__</a></b> (<i>self</i>, QSqlDatabase <i>other</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#QSqlDatabase-3" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#QSqlDatabase-3">__init__</a></b> (<i>self</i>, QString <i>type</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#QSqlDatabase-4" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#QSqlDatabase-4">__init__</a></b> (<i>self</i>, QSqlDriver <i>driver</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#close" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#close">close</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>bool <b><a href="qsqldatabase.html#commit" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#commit">commit</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>QString <b><a href="qsqldatabase.html#connectionName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#connectionName">connectionName</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>QString <b><a href="qsqldatabase.html#connectOptions" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#connectOptions">connectOptions</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>QString <b><a href="qsqldatabase.html#databaseName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#databaseName">databaseName</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>QSqlDriver <b><a href="qsqldatabase.html#driver" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#driver">driver</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>QString <b><a href="qsqldatabase.html#driverName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#driverName">driverName</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>QSqlQuery <b><a href="qsqldatabase.html#exec" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#exec">exec_</a></b> (<i>self</i>, QString <i>query</i> = QString())</li>
<li>
<div class="fn"></div>QString <b><a href="qsqldatabase.html#hostName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#hostName">hostName</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>bool <b><a href="qsqldatabase.html#isOpen" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#isOpen">isOpen</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>bool <b><a href="qsqldatabase.html#isOpenError" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#isOpenError">isOpenError</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>bool <b><a href="qsqldatabase.html#isValid" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#isValid">isValid</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>QSqlError <b><a href="qsqldatabase.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#lastError">lastError</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>QSql.NumericalPrecisionPolicy <b><a href="qsqldatabase.html#numericalPrecisionPolicy" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#numericalPrecisionPolicy">numericalPrecisionPolicy</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>bool <b><a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>bool <b><a href="qsqldatabase.html#open-2" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open-2">open</a></b> (<i>self</i>, QString <i>user</i>, QString <i>password</i>)</li>
<li>
<div class="fn"></div>QString <b><a href="qsqldatabase.html#password" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#password">password</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>int <b><a href="qsqldatabase.html#port" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#port">port</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>QSqlIndex <b><a href="qsqldatabase.html#primaryIndex" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#primaryIndex">primaryIndex</a></b> (<i>self</i>, QString <i>tablename</i>)</li>
<li>
<div class="fn"></div>QSqlRecord <b><a href="qsqldatabase.html#record" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#record">record</a></b> (<i>self</i>, QString <i>tablename</i>)</li>
<li>
<div class="fn"></div>bool <b><a href="qsqldatabase.html#rollback" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#rollback">rollback</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#setConnectOptions" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setConnectOptions">setConnectOptions</a></b> (<i>self</i>, QString <i>options</i> = QString())</li>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#setDatabaseName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setDatabaseName">setDatabaseName</a></b> (<i>self</i>, QString <i>name</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#setHostName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setHostName">setHostName</a></b> (<i>self</i>, QString <i>host</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#setNumericalPrecisionPolicy" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setNumericalPrecisionPolicy">setNumericalPrecisionPolicy</a></b> (<i>self</i>, QSql.NumericalPrecisionPolicy <i>precisionPolicy</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#setPassword" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPassword">setPassword</a></b> (<i>self</i>, QString <i>password</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#setPort" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPort">setPort</a></b> (<i>self</i>, int <i>p</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#setUserName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setUserName">setUserName</a></b> (<i>self</i>, QString <i>name</i>)</li>
<li>
<div class="fn"></div>QStringList <b><a href="qsqldatabase.html#tables" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#tables">tables</a></b> (<i>self</i>, QSql.TableType <i>type</i> = QSql.Tables)</li>
<li>
<div class="fn"></div>bool <b><a href="qsqldatabase.html#transaction" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#transaction">transaction</a></b> (<i>self</i>)</li>
<li>
<div class="fn"></div>QString <b><a href="qsqldatabase.html#userName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#userName">userName</a></b> (<i>self</i>)</li>
</ul>
<h3>Static Methods</h3>
<ul>
<li>
<div class="fn"></div>QSqlDatabase <b><a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a></b> (QString <i>type</i>, QString <i>connectionName</i> = QLatin1String(QSqlDatabase.defaultConnection))</li>
<li>
<div class="fn"></div>QSqlDatabase <b><a href="qsqldatabase.html#addDatabase-2" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase-2">addDatabase</a></b> (QSqlDriver <i>driver</i>, QString <i>connectionName</i> = QLatin1String(QSqlDatabase.defaultConnection))</li>
<li>
<div class="fn"></div>QSqlDatabase <b><a href="qsqldatabase.html#cloneDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#cloneDatabase">cloneDatabase</a></b> (QSqlDatabase <i>other</i>, QString <i>connectionName</i>)</li>
<li>
<div class="fn"></div>QStringList <b><a href="qsqldatabase.html#connectionNames" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#connectionNames">connectionNames</a></b> ()</li>
<li>
<div class="fn"></div>bool <b><a href="qsqldatabase.html#contains" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#contains">contains</a></b> (QString <i>connectionName</i> = QLatin1String(QSqlDatabase.defaultConnection))</li>
<li>
<div class="fn"></div>QSqlDatabase <b><a href="qsqldatabase.html#database" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#database">database</a></b> (QString <i>connectionName</i> = QLatin1String(QSqlDatabase.defaultConnection), bool <i>open</i> = True)</li>
<li>
<div class="fn"></div>QStringList <b><a href="qsqldatabase.html#drivers" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#drivers">drivers</a></b> ()</li>
<li>
<div class="fn"></div>bool <b><a href="qsqldatabase.html#isDriverAvailable" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#isDriverAvailable">isDriverAvailable</a></b> (QString <i>name</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#registerSqlDriver" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#registerSqlDriver">registerSqlDriver</a></b> (QString <i>name</i>, QSqlDriverCreatorBase <i>creator</i>)</li>
<li>
<div class="fn"></div>
<b><a href="qsqldatabase.html#removeDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#removeDatabase">removeDatabase</a></b> (QString <i>connectionName</i>)</li>
</ul>
<a name="details"></a><div class="ad">
<hr>
 
</div>
<h2>Detailed Description</h2>
<p>该QSqlDatabase类表示一个到数据库的连接。</p>
<p>该QSqlDatabase类提供了通过连接访问数据库的接口。 QSqlDatabase的实例代表连接。连接经由一个可访问数据库<a href="index.htm#supported-databases" tppabs="http://pyqt4doc.appspot.com/sql-driver.html#supported-databases">supported database
drivers</a>，其衍生自<a href="qsqldriver.html" tppabs="http://pyqt4doc.appspot.com/qsqldriver.html">QSqlDriver</a>。或者，您也可以从继承自己的数据库驱动程序<a href="qsqldriver.html" tppabs="http://pyqt4doc.appspot.com/qsqldriver.html">QSqlDriver</a>。看<a href="index.htm#how-to-write-your-own-database-driver" tppabs="http://pyqt4doc.appspot.com/sql-driver.html#how-to-write-your-own-database-driver">How to
Write Your Own Database Driver</a>了解更多信息。</p>
<p>通过调用静态的创建一个连接（即QSqlDatabase的实例）<a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>（ ）函数，在这里您可以指定<a href="index.htm#supported-databases" tppabs="http://pyqt4doc.appspot.com/sql-driver.html#supported-databases">the
driver or type of driver</a>使用（比如，你要访问什么样的数据库？ ）和一个连接名称。一个连接是由它自己的名字众所周知，<i>not</i>由数据库的名称将其连接到。你可以有多个连接到一个数据库。 QSqlDatabase还支持的概念<i>default</i>连接，这是未命名的连接。要创建默认的连接，当你调用不通过连接名称参数<a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>（ ） 。随后，当你调用任何静态成员函数，它的连接名称的说法，如果你不通过连接名称参数，则假定为默认连接。下面的代码片断显示了如何创建并打开一个默认连接到PostgreSQL数据库：</p>
<pre class="cpp">
     <span class="type">QSqlDatabase</span> db <span class="operator">=</span> <span class="type">QSqlDatabase</span><span class="operator">.</span>addDatabase(<span class="string">"QPSQL"</span>);
     db<span class="operator">.</span>setHostName(<span class="string">"acidalia"</span>);
     db<span class="operator">.</span>setDatabaseName(<span class="string">"customdb"</span>);
     db<span class="operator">.</span>setUserName(<span class="string">"mojito"</span>);
     db<span class="operator">.</span>setPassword(<span class="string">"J0a1m8"</span>);
     <span class="type">bool</span> ok <span class="operator">=</span> db<span class="operator">.</span>open();
</pre>
<p>一旦QSqlDatabase对象已经创建，以设置连接参数<a href="qsqldatabase.html#setDatabaseName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setDatabaseName">setDatabaseName</a>（ ）<a href="qsqldatabase.html#setUserName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setUserName">setUserName</a>（ ）<a href="qsqldatabase.html#setPassword" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPassword">setPassword</a>（ ）<a href="qsqldatabase.html#setHostName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setHostName">setHostName</a>（ ）<a href="qsqldatabase.html#setPort" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPort">setPort</a>（）和<a href="qsqldatabase.html#setConnectOptions" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setConnectOptions">setConnectOptions</a>（ ） 。然后调用<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ）来激活到数据库的物理连接。该连接不可用，直到你打开它。</p>
<p>上面定义的连接将是<i>default</i>连接，因为我们没有给一个连接名称<a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase()</a>。随后，您可以通过调用得到的默认连接<a href="qsqldatabase.html#database" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#database">database</a>（ ）无连接名称参数：</p>
<pre class="cpp">
     <span class="type">QSqlDatabase</span> db <span class="operator">=</span> <span class="type">QSqlDatabase</span><span class="operator">.</span>database();
</pre>
<p>QSqlDatabase是一个值类。通过QSqlDatabase的一个实例数据库连接所做的更改将影响QSqlDatabase ，代表相同的连接其他实例。使用<a href="qsqldatabase.html#cloneDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#cloneDatabase">cloneDatabase</a>（）来创建基于现有一个独立的数据库连接。</p>
<p>如果你创建多个数据库连接，为每一个指定一个唯一的连接名称，当你调用<a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>（ ） 。使用<a href="qsqldatabase.html#database" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#database">database</a>（ ）有一个连接名称来获取连接。使用<a href="qsqldatabase.html#removeDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#removeDatabase">removeDatabase</a>（ ）有一个连接名称删除的连接。如果您尝试删除其他QSqlDatabase对象引用的连接QSqlDatabase输出一个警告。使用<a href="qsqldatabase.html#contains" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#contains">contains</a>（ ），看看是否一个给定的连接名称为连接列表。</p>
<p>一旦建立了连接，你可以调用<a href="qsqldatabase.html#tables" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#tables">tables</a>（）来获取数据库中，调用表的列表<a href="qsqldatabase.html#primaryIndex" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#primaryIndex">primaryIndex</a>（）来获取一个表的主索引，并调用<a href="qsqldatabase.html#record" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#record">record</a>（ ）来获取有关表的字段（例如，字段名）的元信息。</p>
<p><b>Note:</b> <a href="qsqldatabase.html#exec" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#exec">QSqlDatabase.exec</a>（ ）已过时。使用<a href="qsqlquery.html#exec" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html#exec">QSqlQuery.exec</a>（ ）来代替。</p>
<p>如果驱动程序支持的交易，使用<a href="qsqldatabase.html#transaction" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#transaction">transaction</a>（ ）来启动一个事务，<a href="qsqldatabase.html#commit" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#commit">commit</a>（）或<a href="qsqldatabase.html#rollback" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#rollback">rollback</a>（）来完成它。使用<a href="qsqldriver.html#hasFeature" tppabs="http://pyqt4doc.appspot.com/qsqldriver.html#hasFeature">hasFeature()</a>请问如果驱动程序支持的交易。<b>Note:</b>当使用事务时，必须启动该交易在创建查询之前。</p>
<p>如果一个错误发生，<a href="qsqldatabase.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#lastError">lastError</a>（ ）将返回有关它的信息。</p>
<p>获取可用的SQL驱动程序的名称与<a href="qsqldatabase.html#drivers" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#drivers">drivers</a>（ ） 。检查与特定驱动程序的存在<a href="qsqldatabase.html#isDriverAvailable" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#isDriverAvailable">isDriverAvailable</a>（ ） 。如果您已经创建自己的自定义驱动程序，您必须进行注册<a href="qsqldatabase.html#registerSqlDriver" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#registerSqlDriver">registerSqlDriver</a>（ ） 。</p>
<hr>
<h2>Method Documentation</h2>
<h3 class="fn">
<a name="QSqlDatabase"></a>QSqlDatabase.__init__ (<i>self</i>)</h3>
<p>创建一个空的，无效的<a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a>对象。使用<a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>（ ）<a href="qsqldatabase.html#removeDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#removeDatabase">removeDatabase</a>（）和<a href="qsqldatabase.html#database" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#database">database</a>（ ）来获取有效的<a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a>对象。</p>


<h3 class="fn">
<a name="QSqlDatabase-2"></a>QSqlDatabase.__init__ (<i>self</i>, <a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a> <i>other</i>)</h3>
<p>创建副本<i>other</i>。</p>


<h3 class="fn">
<a name="QSqlDatabase-3"></a>QSqlDatabase.__init__ (<i>self</i>, QString <i>type</i>)</h3>
<p>这是一个重载函数。</p>
<p>创建<a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a>使用由所述的驱动程序连接<i>type</i>。如果<i>type</i>无法识别，数据库连接将没有任何功能。</p>
<p>目前可用的驱动器类型有：</p>
<table class="generic">
<thead>
<tr class="qt-style">
<th>Driver Type</th>
<th>Description</th>
</tr>
</thead>
<tr class="odd" valign="top">
<td>QDB2</td>
<td>IBM DB2</td>
</tr>
<tr class="even" valign="top">
<td>QIBASE</td>
<td>Borland InterBase Driver</td>
</tr>
<tr class="odd" valign="top">
<td>QMYSQL</td>
<td>MySQL Driver</td>
</tr>
<tr class="even" valign="top">
<td>QOCI</td>
<td>Oracle Call Interface Driver</td>
</tr>
<tr class="odd" valign="top">
<td>QODBC</td>
<td>ODBC Driver (includes Microsoft SQL Server)</td>
</tr>
<tr class="even" valign="top">
<td>QPSQL</td>
<td>PostgreSQL Driver</td>
</tr>
<tr class="odd" valign="top">
<td>QSQLITE</td>
<td>SQLite version 3 or above</td>
</tr>
<tr class="even" valign="top">
<td>QSQLITE2</td>
<td>SQLite version 2</td>
</tr>
<tr class="odd" valign="top">
<td>QTDS</td>
<td>Sybase Adaptive Server</td>
</tr>
</table>
<p>额外的第三方驱动程序，包括您自己的自定义驱动程序，可以动态加载。</p>
<p><b>See also</b> <a href="index.htm" tppabs="http://pyqt4doc.appspot.com/sql-driver.html">SQL Database
Drivers</a>，<a href="qsqldatabase.html#registerSqlDriver" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#registerSqlDriver">registerSqlDriver</a>（）和<a href="qsqldatabase.html#drivers" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#drivers">drivers</a>（ ） 。</p>


<h3 class="fn">
<a name="QSqlDatabase-4"></a>QSqlDatabase.__init__ (<i>self</i>, <a href="qsqldriver.html" tppabs="http://pyqt4doc.appspot.com/qsqldriver.html">QSqlDriver</a> <i>driver</i>)</h3>
<p>这是一个重载函数。</p>
<p>创建使用给定的数据库连接<i>driver</i>。</p>


<h3 class="fn">
<a name="addDatabase"></a><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a> QSqlDatabase.addDatabase (QString <i>type</i>, QString <i>connectionName</i> = QLatin1String(QSqlDatabase.defaultConnection))</h3>
<p>增加了一个数据库，以数据库连接使用的驱动程序的列表<i>type</i>和连接名称<i>connectionName</i>。如果已经存在一个名为数据库连接<i>connectionName</i>，则该连接被删除。</p>
<p>数据库连接是通过被称为<i>connectionName</i>。返回新添加的数据库连接。</p>
<p>If <i>type</i>不可用或无法加载，<a href="qsqldatabase.html#isValid" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#isValid">isValid</a>（ ）返回False 。</p>
<p>If <i>connectionName</i>没有指定，则新的连接成为应用程序的默认连接，并随后调用<a href="qsqldatabase.html#database" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#database">database</a>（ ）无连接名称参数将返回默认的连接。如果<i>connectionName</i>这里提供的，使用的数据库（<i>connectionName</i>）来检索连接。</p>
<p><b>Warning:</b>如果您添加了具有相同名称的现有连接的连接，新的连接将会取代旧的。如果你调用这个函数一次以上，而无需指定<i>connectionName</i>，默认的连接将是一个替代。</p>
<p>使用连接之前，它必须被初始化。例如，调用一些或全部<a href="qsqldatabase.html#setDatabaseName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setDatabaseName">setDatabaseName</a>（ ）<a href="qsqldatabase.html#setUserName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setUserName">setUserName</a>（ ）<a href="qsqldatabase.html#setPassword" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPassword">setPassword</a>（ ）<a href="qsqldatabase.html#setHostName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setHostName">setHostName</a>（ ）<a href="qsqldatabase.html#setPort" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPort">setPort</a>（）和<a href="qsqldatabase.html#setConnectOptions" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setConnectOptions">setConnectOptions</a>（ ） ，最后是<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ） 。</p>
<p><b>Note:</b>这个功能是<a href="index.htm#thread-safe" tppabs="http://pyqt4doc.appspot.com/threads-reentrancy.html#thread-safe">thread-safe</a>。</p>
<p><b>See also</b> <a href="qsqldatabase.html#database" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#database">database</a>（ ）<a href="qsqldatabase.html#removeDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#removeDatabase">removeDatabase</a>（）和<a href="index.htm#threads-and-the-sql-module" tppabs="http://pyqt4doc.appspot.com/threads-modules.html#threads-and-the-sql-module">Threads
and the SQL Module</a>。</p>


<h3 class="fn">
<a name="addDatabase-2"></a><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a> QSqlDatabase.addDatabase (<a href="qsqldriver.html" tppabs="http://pyqt4doc.appspot.com/qsqldriver.html">QSqlDriver</a> <i>driver</i>, QString <i>connectionName</i> = QLatin1String(QSqlDatabase.defaultConnection))</h3>
<p>当你想创建一个数据库连接此重载很有用<a href="qsqldriver.html" tppabs="http://pyqt4doc.appspot.com/qsqldriver.html">driver</a>你实例化你自己。这可能是你自己的数据库驱动程序，或者你可能只需要自己实例化Qt的驱动力之一。如果你这样做，建议您在您的应用程序的驱动程序代码。例如，您可以创建自己的QPSQL驱动这样一个PostgreSQL连接：</p>
<pre class="cpp">
 <span class="preprocessor">#include "qtdir/src/sql/drivers/psql/qsql_psql.cpp"</span>

 PGconn <span class="operator">*</span>con <span class="operator">=</span> PQconnectdb(<span class="string">"host=server user=bart password=simpson dbname=springfield"</span>);
 <span class="type">QPSQLDriver</span> <span class="operator">*</span>drv <span class="operator">=</span>  <span class="keyword">new</span> <span class="type">QPSQLDriver</span>(con);
 <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span> db <span class="operator">=</span> <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span><span class="operator">.</span><a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>(drv); <span class="comment">// becomes the new default connection</span>
 <span class="type"><a href="qsqlquery.html" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html">QSqlQuery</a></span> query;
 query<span class="operator">.</span><a href="qsqldatabase.html#exec" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#exec">exec_</a>(<span class="string">"SELECT NAME, ID FROM STAFF"</span>);
 <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
</pre>
<p>上面的代码设置了一个PostgreSQL连接并实例化一个QPSQLDriver对象。接下来，<a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>（）被调用，以连接添加到已知的连接，这样它可用于通过Qt的SQL类。当驱动程序被实例化一个连接句柄（或一组手柄） ， Qt的假设你已经打开了数据库连接。</p>
<p><b>Note:</b>我们假设<tt>qtdir</tt>是安装Qt的目录。这将拉动中所需要使用的PostgreSQL客户端库和实例化一个QPSQLDriver对象的代码，假设你有PostgreSQL的头放在你的头文件搜索路径。</p>
<p>请记住，你必须链接您的应用程序对数据库客户端库。确保客户端库是在你的链接器的搜索路径，并添加像这些行到你的<tt>.pro</tt>文件：</p>
<pre class="cpp">
 unix:LIBS <span class="operator">+</span><span class="operator">=</span> <span class="operator">-</span>lpq
 win32:LIBS <span class="operator">+</span><span class="operator">=</span> libpqdll<span class="operator">.</span>lib
</pre>
<p>该方法描述的作品，所有提供的驱动程序。唯一的区别是在驱动程序构造器参数。下面是包含了Qt的驱动程序，其源代码文件，以及它们的构造函数的参数表：</p>
<table class="generic">
<thead>
<tr class="qt-style">
<th>Driver</th>
<th>Class name</th>
<th>Constructor arguments</th>
<th>File to include</th>
</tr>
</thead>
<tr class="odd" valign="top">
<td>QPSQL</td>
<td>QPSQLDriver</td>
<td>PGconn *connection</td>
<td><tt>qsql_psql.cpp</tt></td>
</tr>
<tr class="even" valign="top">
<td>QMYSQL</td>
<td>QMYSQLDriver</td>
<td>MYSQL *connection</td>
<td><tt>qsql_mysql.cpp</tt></td>
</tr>
<tr class="odd" valign="top">
<td>QOCI</td>
<td>QOCIDriver</td>
<td>OCIEnv *environment, OCISvcCtx *serviceContext</td>
<td><tt>qsql_oci.cpp</tt></td>
</tr>
<tr class="even" valign="top">
<td>QODBC</td>
<td>QODBCDriver</td>
<td>SQLHANDLE environment, SQLHANDLE connection</td>
<td><tt>qsql_odbc.cpp</tt></td>
</tr>
<tr class="odd" valign="top">
<td>QDB2</td>
<td>QDB2</td>
<td>SQLHANDLE environment, SQLHANDLE connection</td>
<td><tt>qsql_db2.cpp</tt></td>
</tr>
<tr class="even" valign="top">
<td>QTDS</td>
<td>QTDSDriver</td>
<td>LOGINREC *loginRecord, DBPROCESS *dbProcess, const <a href="qstring.html" tppabs="http://pyqt4doc.appspot.com/qstring.html">QString</a> &amp;hostName</td>
<td><tt>qsql_tds.cpp</tt></td>
</tr>
<tr class="odd" valign="top">
<td>QSQLITE</td>
<td>QSQLiteDriver</td>
<td>sqlite *connection</td>
<td><tt>qsql_sqlite.cpp</tt></td>
</tr>
<tr class="even" valign="top">
<td>QIBASE</td>
<td>QIBaseDriver</td>
<td>isc_db_handle connection</td>
<td><tt>qsql_ibase.cpp</tt></td>
</tr>
</table>
<p>主机名称（或服务名称）正在建设中的QTDSDriver建立内部查询的新连接时需要。这是为了防止阻塞几个时<a href="qsqlquery.html" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html">QSqlQuery</a>物同时使用。</p>
<p><b>Warning:</b>添加具有相同的连接名称与现有连接的数据库连接，使现有连接被新的所取代。</p>
<p><b>Warning:</b>在SQL框架采用的所有权<i>driver</i>。它不能被删除。要删除连接，请使用<a href="qsqldatabase.html#removeDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#removeDatabase">removeDatabase</a>（ ） 。</p>
<p><b>See also</b> <a href="qsqldatabase.html#drivers" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#drivers">drivers</a>（ ） 。</p>


<h3 class="fn">
<a name="cloneDatabase"></a><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a> QSqlDatabase.cloneDatabase (<a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a> <i>other</i>, QString <i>connectionName</i>)</h3>
<p>克隆数据库连接<i>other</i>和并将其存储为<i>connectionName</i>。所有从原始数据库的设置，例如<a href="qsqldatabase.html#databaseName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#databaseName">databaseName</a>（ ）<a href="qsqldatabase.html#hostName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#hostName">hostName</a>（ ）等，被复制的对面。什么都不做，如果<i>other</i>是一个无效的数据库。返回新创建的数据库连接。</p>
<p><b>Note:</b>新的连接没有被打开。使用新的连接之前，你必须调用<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ） 。</p>


<h3 class="fn">
<a name="close"></a>QSqlDatabase.close (<i>self</i>)</h3>
<p>关闭数据库连接，释放佔用的所有资源和无效的任何现有<a href="qsqlquery.html" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html">QSqlQuery</a>所使用的数据库对象。</p>
<p>这也将影响到这个份<a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a>对象。</p>
<p><b>See also</b> <a href="qsqldatabase.html#removeDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#removeDatabase">removeDatabase</a>（ ） 。</p>


<h3 class="fn">
<a name="commit"></a>bool QSqlDatabase.commit (<i>self</i>)</h3>
<p>提交事务对数据库如果驱动程序支持事务和<a href="qsqldatabase.html#transaction" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#transaction">transaction</a>（ ）已经启动。回报<tt>true</tt>如果操作成功。否则返回<tt>false</tt>。</p>
<p><b>Note:</b>对于某些数据库，提交会失败，并返回<tt>false</tt>如果有一个<a href="qsqlquery.html#isActive" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html#isActive">active query</a>使用该数据库的<tt>SELECT</tt>。使查询<a href="qsqlquery.html#isActive" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html#isActive">inactive</a>在做之前提交。</p>
<p>Call <a href="qsqldatabase.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#lastError">lastError</a>（ ）以获取有关错误的信息。</p>
<p><b>See also</b> <a href="qsqlquery.html#isActive" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html#isActive">QSqlQuery.isActive</a>（ ）<a href="qsqldriver.html#hasFeature" tppabs="http://pyqt4doc.appspot.com/qsqldriver.html#hasFeature">QSqlDriver.hasFeature</a>（）和<a href="qsqldatabase.html#rollback" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#rollback">rollback</a>（ ） 。</p>


<h3 class="fn">
<a name="connectionName"></a>QString QSqlDatabase.connectionName (<i>self</i>)</h3>
<p>返回连接的名称，这可能是空的。<b>Note:</b>连接名称是不<a href="qsqldatabase.html#databaseName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#databaseName">database name</a>。</p>
<p>此功能被引入Qt的4.4 。</p>
<p><b>See also</b> <a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>（ ） 。</p>


<h3 class="fn">
<a name="connectionNames"></a>QStringList QSqlDatabase.connectionNames ()</h3>
<p>返回一个包含所有连接的名称的列表。</p>
<p><b>Note:</b>这个功能是<a href="index.htm#thread-safe" tppabs="http://pyqt4doc.appspot.com/threads-reentrancy.html#thread-safe">thread-safe</a>。</p>
<p><b>See also</b> <a href="qsqldatabase.html#contains" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#contains">contains</a>（ ）<a href="qsqldatabase.html#database" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#database">database</a>（）和<a href="index.htm#threads-and-the-sql-module" tppabs="http://pyqt4doc.appspot.com/threads-modules.html#threads-and-the-sql-module">Threads and the
SQL Module</a>。</p>


<h3 class="fn">
<a name="connectOptions"></a>QString QSqlDatabase.connectOptions (<i>self</i>)</h3>
<p>返回用于该连接的连接选项字符串。该字符串可能是空的。</p>
<p><b>See also</b> <a href="qsqldatabase.html#setConnectOptions" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setConnectOptions">setConnectOptions</a>（ ） 。</p>


<h3 class="fn">
<a name="contains"></a>bool QSqlDatabase.contains (QString <i>connectionName</i> = QLatin1String(QSqlDatabase.defaultConnection))</h3>
<p>返回True如果数据库连接的列表中包含<i>connectionName</i>否则返回False 。</p>
<p><b>Note:</b>这个功能是<a href="index.htm#thread-safe" tppabs="http://pyqt4doc.appspot.com/threads-reentrancy.html#thread-safe">thread-safe</a>。</p>
<p><b>See also</b> <a href="qsqldatabase.html#connectionNames" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#connectionNames">connectionNames</a>（ ）<a href="qsqldatabase.html#database" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#database">database</a>（）和<a href="index.htm#threads-and-the-sql-module" tppabs="http://pyqt4doc.appspot.com/threads-modules.html#threads-and-the-sql-module">Threads and the
SQL Module</a>。</p>


<h3 class="fn">
<a name="database"></a><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a> QSqlDatabase.database (QString <i>connectionName</i> = QLatin1String(QSqlDatabase.defaultConnection), bool <i>open</i> = True)</h3>
<p>返回称为数据库连接<i>connectionName</i>。数据库连接必须已经添加了<a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>（ ） 。如果<i>open</i>为True（默认值），数据库连接是不是已经打开，现在打开。如果没有<i>connectionName</i>是指定使用的默认连接。如果<i>connectionName</i>在数据库列表中不存在，则返回一个无效的连接。</p>
<p><b>Note:</b>这个功能是<a href="index.htm#thread-safe" tppabs="http://pyqt4doc.appspot.com/threads-reentrancy.html#thread-safe">thread-safe</a>。</p>
<p><b>See also</b> <a href="qsqldatabase.html#isOpen" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#isOpen">isOpen</a>（）和<a href="index.htm#threads-and-the-sql-module" tppabs="http://pyqt4doc.appspot.com/threads-modules.html#threads-and-the-sql-module">Threads and the
SQL Module</a>。</p>


<h3 class="fn">
<a name="databaseName"></a>QString QSqlDatabase.databaseName (<i>self</i>)</h3>
<p>返回连接的数据库名，它可能是空的。<b>Note:</b>数据库名是没有连接名称。</p>
<p><b>See also</b> <a href="qsqldatabase.html#setDatabaseName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setDatabaseName">setDatabaseName</a>（ ） 。</p>


<h3 class="fn">
<a name="driver"></a><a href="qsqldriver.html" tppabs="http://pyqt4doc.appspot.com/qsqldriver.html">QSqlDriver</a> QSqlDatabase.driver (<i>self</i>)</h3>
<p>返回用于访问数据库连接的数据库驱动程序。</p>
<p><b>See also</b> <a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>（）和<a href="qsqldatabase.html#drivers" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#drivers">drivers</a>（ ） 。</p>


<h3 class="fn">
<a name="driverName"></a>QString QSqlDatabase.driverName (<i>self</i>)</h3>
<p>返回连接的驱动程序名称。</p>
<p><b>See also</b> <a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>（）和<a href="qsqldatabase.html#driver" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#driver">driver</a>（ ） 。</p>


<h3 class="fn">
<a name="drivers"></a>QStringList QSqlDatabase.drivers ()</h3>
<p>返回所有可用的数据库驱动程序的列表。</p>
<p><b>See also</b> <a href="qsqldatabase.html#registerSqlDriver" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#registerSqlDriver">registerSqlDriver</a>（ ） 。</p>


<h3 class="fn">
<a name="exec"></a><a href="qsqlquery.html" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html">QSqlQuery</a> QSqlDatabase.exec_ (<i>self</i>, QString <i>query</i> = QString())</h3>
<p>执行一条SQL语句在数据库上，并返回一个<a href="qsqlquery.html" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html">QSqlQuery</a>对象。使用<a href="qsqldatabase.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#lastError">lastError</a>（ ）来检索错误信息。如果<i>query</i>是空的，空的，无效的查询将返回和<a href="qsqldatabase.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#lastError">lastError</a>（）不受影响。</p>
<p><b>See also</b> <a href="qsqlquery.html" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html">QSqlQuery</a>和<a href="qsqldatabase.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#lastError">lastError</a>（ ） 。</p>


<h3 class="fn">
<a name="hostName"></a>QString QSqlDatabase.hostName (<i>self</i>)</h3>
<p>返回连接的主机名，它可能是空的。</p>
<p><b>See also</b> <a href="qsqldatabase.html#setHostName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setHostName">setHostName</a>（ ） 。</p>


<h3 class="fn">
<a name="isDriverAvailable"></a>bool QSqlDatabase.isDriverAvailable (QString <i>name</i>)</h3>
<p>返回True如果一个叫做驱动程序<i>name</i>可用;否则返回False。</p>
<p><b>See also</b> <a href="qsqldatabase.html#drivers" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#drivers">drivers</a>（ ） 。</p>


<h3 class="fn">
<a name="isOpen"></a>bool QSqlDatabase.isOpen (<i>self</i>)</h3>
<p>返回True如果数据库连接是当前打开，否则返回False 。</p>


<h3 class="fn">
<a name="isOpenError"></a>bool QSqlDatabase.isOpenError (<i>self</i>)</h3>
<p>返回True如果有一个错误打开数据库连接，否则返回False 。错误信息可使用检索到的<a href="qsqldatabase.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#lastError">lastError</a>（）函数。</p>


<h3 class="fn">
<a name="isValid"></a>bool QSqlDatabase.isValid (<i>self</i>)</h3>
<p>返回True如果<a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a>有一个有效的驱动程序。</p>
<p>例如：</p>
<pre class="cpp">
 <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span> db;
 <a href="index.htm#qDebug" tppabs="http://pyqt4doc.appspot.com/qtcore.html#qDebug">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> db<span class="operator">.</span>isValid();    <span class="comment">// Returns false</span>

 db <span class="operator">=</span> <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span><span class="operator">.</span><a href="qsqldatabase.html#database" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#database">database</a>(<span class="string">"sales"</span>);
 <a href="index.htm#qDebug" tppabs="http://pyqt4doc.appspot.com/qtcore.html#qDebug">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> db<span class="operator">.</span>isValid();    <span class="comment">// Returns true if "sales" connection exists</span>

 <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span><span class="operator">.</span><a href="qsqldatabase.html#removeDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#removeDatabase">removeDatabase</a>(<span class="string">"sales"</span>);
 <a href="index.htm#qDebug" tppabs="http://pyqt4doc.appspot.com/qtcore.html#qDebug">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> db<span class="operator">.</span>isValid();    <span class="comment">// Returns false</span>
</pre>


<h3 class="fn">
<a name="lastError"></a><a href="qsqlerror.html" tppabs="http://pyqt4doc.appspot.com/qsqlerror.html">QSqlError</a> QSqlDatabase.lastError (<i>self</i>)</h3>
<p>返回有关数据库上发生的最后一个错误信息。</p>
<p>发生在与一个单独的查询相结合的故障报告通过<a href="qsqlquery.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html#lastError">QSqlQuery.lastError</a>（ ） 。</p>
<p><b>See also</b> <a href="qsqlerror.html" tppabs="http://pyqt4doc.appspot.com/qsqlerror.html">QSqlError</a>和<a href="qsqlquery.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html#lastError">QSqlQuery.lastError</a>（ ） 。</p>


<h3 class="fn">
<a name="numericalPrecisionPolicy"></a><a href="qsql.html#NumericalPrecisionPolicy-enum" tppabs="http://pyqt4doc.appspot.com/qsql.html#NumericalPrecisionPolicy-enum">QSql.NumericalPrecisionPolicy</a> QSqlDatabase.numericalPrecisionPolicy (<i>self</i>)</h3>
<p>返回数据库连接的当前默认精度的政策。</p>
<p>此功能被引入Qt的4.6 。</p>
<p><b>See also</b> <a href="qsql.html#NumericalPrecisionPolicy-enum" tppabs="http://pyqt4doc.appspot.com/qsql.html#NumericalPrecisionPolicy-enum">QSql.NumericalPrecisionPolicy</a>，<a href="qsqldatabase.html#setNumericalPrecisionPolicy" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setNumericalPrecisionPolicy">setNumericalPrecisionPolicy</a>（ ）<a href="qsqlquery.html#numericalPrecisionPolicy" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html#numericalPrecisionPolicy">QSqlQuery.numericalPrecisionPolicy</a>（）和<a href="qsqlquery.html#setNumericalPrecisionPolicy" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html#setNumericalPrecisionPolicy">QSqlQuery.setNumericalPrecisionPolicy</a>（ ） 。</p>


<h3 class="fn">
<a name="open"></a>bool QSqlDatabase.open (<i>self</i>)</h3>
<p>打开使用当前连接的值的数据库连接。成功时返回TRUE ，否则返回False 。错误信息可以使用检索<a href="qsqldatabase.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#lastError">lastError</a>（ ） 。</p>
<p><b>See also</b> <a href="qsqldatabase.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#lastError">lastError</a>（ ）<a href="qsqldatabase.html#setDatabaseName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setDatabaseName">setDatabaseName</a>（ ）<a href="qsqldatabase.html#setUserName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setUserName">setUserName</a>（ ）<a href="qsqldatabase.html#setPassword" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPassword">setPassword</a>（ ）<a href="qsqldatabase.html#setHostName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setHostName">setHostName</a>（ ）<a href="qsqldatabase.html#setPort" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPort">setPort</a>（）和<a href="qsqldatabase.html#setConnectOptions" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setConnectOptions">setConnectOptions</a>（ ） 。</p>


<h3 class="fn">
<a name="open-2"></a>bool QSqlDatabase.open (<i>self</i>, QString <i>user</i>, QString <i>password</i>)</h3>
<p>这是一个重载函数。</p>
<p>打开使用给定的数据库连接<i>user</i>命名并<i>password</i>。成功时返回TRUE ，否则返回False 。错误信息可使用检索到的<a href="qsqldatabase.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#lastError">lastError</a>（）函数。</p>
<p>此功能不能存储它被赋予的密码。相反，该密码被直接传递给驱动程序以打开连接且随后被丢弃。</p>
<p><b>See also</b> <a href="qsqldatabase.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#lastError">lastError</a>（ ） 。</p>


<h3 class="fn">
<a name="password"></a>QString QSqlDatabase.password (<i>self</i>)</h3>
<p>返回连接的密码。如果密码没有被设置<a href="qsqldatabase.html#setPassword" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPassword">setPassword</a>（ ），并且如果该密码是在给定的<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ）调用，或者如果没有使用密码，则返回一个空字符串。</p>
<p><b>See also</b> <a href="qsqldatabase.html#setPassword" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPassword">setPassword</a>（ ） 。</p>


<h3 class="fn">
<a name="port"></a>int QSqlDatabase.port (<i>self</i>)</h3>
<p>返回连接的端口号。该值是不确定的，如果该端口号没有被设置。</p>
<p><b>See also</b> <a href="qsqldatabase.html#setPort" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPort">setPort</a>（ ） 。</p>


<h3 class="fn">
<a name="primaryIndex"></a><a href="qsqlindex.html" tppabs="http://pyqt4doc.appspot.com/qsqlindex.html">QSqlIndex</a> QSqlDatabase.primaryIndex (<i>self</i>, QString <i>tablename</i>)</h3>
<p>返回表的主索引<i>tablename</i>。如果没有主索引存在一个空<a href="qsqlindex.html" tppabs="http://pyqt4doc.appspot.com/qsqlindex.html">QSqlIndex</a>返回。</p>
<p><b>See also</b> <a href="qsqldatabase.html#tables" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#tables">tables</a>（）和<a href="qsqldatabase.html#record" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#record">record</a>（ ） 。</p>


<h3 class="fn">
<a name="record"></a><a href="qsqlrecord.html" tppabs="http://pyqt4doc.appspot.com/qsqlrecord.html">QSqlRecord</a> QSqlDatabase.record (<i>self</i>, QString <i>tablename</i>)</h3>
<p>返回<a href="qsqlrecord.html" tppabs="http://pyqt4doc.appspot.com/qsqlrecord.html">QSqlRecord</a>在该表中的所有字段（或视图）的名称叫做填充<i>tablename</i>。在该领域出现的记录的顺序是不确定的。如果没有这样的表（或视图）存在，则返回一个空的记录。</p>


<h3 class="fn">
<a name="registerSqlDriver"></a>QSqlDatabase.registerSqlDriver (QString <i>name</i>, <a href="qsqldrivercreatorbase.html" tppabs="http://pyqt4doc.appspot.com/qsqldrivercreatorbase.html">QSqlDriverCreatorBase</a> <i>creator</i>)</h3>
<p>该<i>creator</i>说法有它的所有权转移给Qt的。</p>
<p>此功能寄存器称为一个新的SQL驱动程序<i>name</i>，内部的SQL框架。如果你有一个自定义的SQL驱动程序，并且不希望将它编译为一个插件，这是很有用的。</p>
<p>例如：</p>
<pre class="cpp">
 <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span><span class="operator">.</span>registerSqlDriver(<span class="string">"MYDRIVER"</span><span class="operator">,</span>
                                 <span class="keyword">new</span> <span class="type"><a href="index.htm" tppabs="http://pyqt4doc.appspot.com/qsqldrivercreator.html">QSqlDriverCreator</a></span><span class="operator">&lt;</span>MyDatabaseDriver<span class="operator">&gt;</span>);
 <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span> db <span class="operator">=</span> <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span><span class="operator">.</span><a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>(<span class="string">"MYDRIVER"</span>);
</pre>
<p><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a>采取所有权<i>creator</i>指针，所以你一定不要自己将它删除。</p>
<p><b>See also</b> <a href="qsqldatabase.html#drivers" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#drivers">drivers</a>（ ） 。</p>


<h3 class="fn">
<a name="removeDatabase"></a>QSqlDatabase.removeDatabase (QString <i>connectionName</i>)</h3>
<p>删除数据库连接<i>connectionName</i>从数据库连接列表中。</p>
<p><b>Warning:</b>不应该有开放的查询时，这个函数被调用的数据库连接上，否则会发生资源洩漏。</p>
<p>例如：</p>
<pre class="cpp">
 <span class="comment">// WRONG</span>
 <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span> db <span class="operator">=</span> <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span><span class="operator">.</span><a href="qsqldatabase.html#database" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#database">database</a>(<span class="string">"sales"</span>);
 <span class="type"><a href="qsqlquery.html" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html">QSqlQuery</a></span> query(<span class="string">"SELECT NAME, DOB FROM EMPLOYEES"</span><span class="operator">,</span> db);
 <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span><span class="operator">.</span>removeDatabase(<span class="string">"sales"</span>); <span class="comment">// will output a warning</span>

 <span class="comment">// "db" is now a dangling invalid database connection,</span>
 <span class="comment">// "query" contains an invalid result set</span>
</pre>
<p>做正确的方法：</p>
<pre class="cpp">
 {
     <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span> db <span class="operator">=</span> <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span><span class="operator">.</span>database(<span class="string">"sales"</span>);
     <span class="type"><a href="qsqlquery.html" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html">QSqlQuery</a></span> query(<span class="string">"SELECT NAME, DOB FROM EMPLOYEES"</span><span class="operator">,</span> db);
 }
 <span class="comment">// Both "db" and "query" are destroyed because they are out of scope</span>
 <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span><span class="operator">.</span>removeDatabase(<span class="string">"sales"</span>); <span class="comment">// correct</span>
</pre>
<p>要删除默认的连接，它可能已经创建了一个调用<a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>（ ）不指定连接名，你可以通过调用检索默认连接名称<a href="qsqldatabase.html#connectionName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#connectionName">connectionName</a>（ ）返回的数据库上<a href="qsqldatabase.html#database" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#database">database</a>（ ） 。请注意，如果尚未创建一个默认的数据库无效的数据库将被退回。</p>
<p><b>Note:</b>这个功能是<a href="index.htm#thread-safe" tppabs="http://pyqt4doc.appspot.com/threads-reentrancy.html#thread-safe">thread-safe</a>。</p>
<p><b>See also</b> <a href="qsqldatabase.html#database" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#database">database</a>（ ）<a href="qsqldatabase.html#connectionName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#connectionName">connectionName</a>（）和<a href="index.htm#threads-and-the-sql-module" tppabs="http://pyqt4doc.appspot.com/threads-modules.html#threads-and-the-sql-module">Threads
and the SQL Module</a>。</p>


<h3 class="fn">
<a name="rollback"></a>bool QSqlDatabase.rollback (<i>self</i>)</h3>
<p>回滚数据库事务，如果驱动程序支持事务和<a href="qsqldatabase.html#transaction" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#transaction">transaction</a>（ ）已经启动。回报<tt>true</tt>如果操作成功。否则返回<tt>false</tt>。</p>
<p><b>Note:</b>对于某些数据库，回滚将失败，并返回<tt>false</tt>如果有一个<a href="qsqlquery.html#isActive" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html#isActive">active query</a>使用该数据库的<tt>SELECT</tt>。使查询<a href="qsqlquery.html#isActive" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html#isActive">inactive</a>之前做回滚。</p>
<p>Call <a href="qsqldatabase.html#lastError" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#lastError">lastError</a>（ ）以获取有关错误的信息。</p>
<p><b>See also</b> <a href="qsqlquery.html#isActive" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html#isActive">QSqlQuery.isActive</a>（ ）<a href="qsqldriver.html#hasFeature" tppabs="http://pyqt4doc.appspot.com/qsqldriver.html#hasFeature">QSqlDriver.hasFeature</a>（）和<a href="qsqldatabase.html#commit" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#commit">commit</a>（ ） 。</p>


<h3 class="fn">
<a name="setConnectOptions"></a>QSqlDatabase.setConnectOptions (<i>self</i>, QString <i>options</i> = QString())</h3>
<p>设置数据库特定的<i>options</i>。这必须是打开连接前或不会有任何效果（或者你可以<a href="qsqldatabase.html#close" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#close">close</a>（ ）的连接，调用这个函数，并<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ）再次连线） 。</p>
<p>的格式<i>options</i>字符串是选项名或选项=值对的分号分隔的列表。该选项取决于所使用的数据库客户端上：</p>
<table class="generic">
<thead>
<tr class="qt-style">
<th>ODBC</th>
<th>MySQL</th>
<th>PostgreSQL</th>
</tr>
</thead>
<tr class="odd" valign="top">
<td>
<ul>
<li>SQL_ATTR_ACCESS_MODE</li>
<li>SQL_ATTR_LOGIN_TIMEOUT</li>
<li>SQL_ATTR_CONNECTION_TIMEOUT</li>
<li>SQL_ATTR_CURRENT_CATALOG</li>
<li>SQL_ATTR_METADATA_ID</li>
<li>SQL_ATTR_PACKET_SIZE</li>
<li>SQL_ATTR_TRACEFILE</li>
<li>SQL_ATTR_TRACE</li>
<li>SQL_ATTR_CONNECTION_POOLING</li>
<li>SQL_ATTR_ODBC_VERSION</li>
</ul>
</td>
<td>
<ul>
<li>CLIENT_COMPRESS</li>
<li>CLIENT_FOUND_ROWS</li>
<li>CLIENT_IGNORE_SPACE</li>
<li>CLIENT_SSL</li>
<li>CLIENT_ODBC</li>
<li>CLIENT_NO_SCHEMA</li>
<li>CLIENT_INTERACTIVE</li>
<li>UNIX_SOCKET</li>
<li>MYSQL_OPT_RECONNECT</li>
</ul>
</td>
<td>
<ul>
<li>connect_timeout</li>
<li>options</li>
<li>tty</li>
<li>requiressl</li>
<li>service</li>
</ul>
</td>
</tr>
<thead>
<tr class="qt-style">
<th>DB2</th>
<th>OCI</th>
<th>TDS</th>
</tr>
</thead>
<tr class="even" valign="top">
<td>
<ul>
<li>SQL_ATTR_ACCESS_MODE</li>
<li>SQL_ATTR_LOGIN_TIMEOUT</li>
</ul>
</td>
<td>
<ul>
<li>OCI_ATTR_PREFETCH_ROWS</li>
<li>OCI_ATTR_PREFETCH_MEMORY</li>
</ul>
</td>
<td><i>none</i></td>
</tr>
<thead>
<tr class="qt-style">
<th>SQLite</th>
<th>Interbase</th>
</tr>
</thead>
<tr class="odd" valign="top">
<td>
<ul>
<li>QSQLITE_BUSY_TIMEOUT</li>
<li>QSQLITE_OPEN_READONLY</li>
<li>QSQLITE_ENABLE_SHARED_CACHE</li>
</ul>
</td>
<td>
<ul>
<li>ISC_DPB_LC_CTYPE</li>
<li>ISC_DPB_SQL_ROLE_NAME</li>
</ul>
</td>
</tr>
</table>
<p>示例：</p>
<pre class="cpp">
 <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
 <span class="comment">// MySQL connection</span>
 db<span class="operator">.</span>setConnectOptions(<span class="string">"CLIENT_SSL=1;CLIENT_IGNORE_SPACE=1"</span>); <span class="comment">// use an SSL connection to the server</span>
 <span class="keyword">if</span> (<span class="operator">!</span>db<span class="operator">.</span>open()) {
     db<span class="operator">.</span>setConnectOptions(); <span class="comment">// clears the connect option string</span>
     <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
 }
 <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
 <span class="comment">// PostgreSQL connection</span>
 db<span class="operator">.</span>setConnectOptions(<span class="string">"requiressl=1"</span>); <span class="comment">// enable PostgreSQL SSL connections</span>
 <span class="keyword">if</span> (<span class="operator">!</span>db<span class="operator">.</span>open()) {
     db<span class="operator">.</span>setConnectOptions(); <span class="comment">// clear options</span>
     <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
 }
 <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
 <span class="comment">// ODBC connection</span>
 db<span class="operator">.</span>setConnectOptions(<span class="string">"SQL_ATTR_ACCESS_MODE=SQL_MODE_READ_ONLY;SQL_ATTR_TRACE=SQL_OPT_TRACE_ON"</span>); <span class="comment">// set ODBC options</span>
 <span class="keyword">if</span> (<span class="operator">!</span>db<span class="operator">.</span>open()) {
     db<span class="operator">.</span>setConnectOptions(); <span class="comment">// don't try to set this option</span>
     <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
 }
</pre>
<p>请参阅客户端库文件有关不同选项的详细信息。</p>
<p><b>See also</b> <a href="qsqldatabase.html#connectOptions" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#connectOptions">connectOptions</a>（ ） 。</p>


<h3 class="fn">
<a name="setDatabaseName"></a>QSqlDatabase.setDatabaseName (<i>self</i>, QString <i>name</i>)</h3>
<p>设置连接的数据库名<i>name</i>。有效果，数据库名称必须设置<i>before</i>该连接是<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">opened</a>。或者，您可以<a href="qsqldatabase.html#close" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#close">close</a>（ ）的连接，设置数据库名，调用<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ）一次。<b>Note:</b>该<i>database name</i>是不<i>connection name</i>。连接名称必须传递给<a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>（ ）在连接对象创建的时间。</p>
<p>对于QOCI （ Oracle）的驱动程序，数据库名是TNS服务名称。</p>
<p>为QODBC驱动程序，<i>name</i>可以是一个DSN ， DSN的一个文件名（在这种情况下，该文件必须有一个<tt>.dsn</tt>扩展名） ，或连接字符串。</p>
<p>例如， Microsoft Access中用户可以使用下面的连接字符串打开一个<tt>.mdb</tt>直接文件，而不必在ODBC管理器创建一个DSN入口， ：</p>
<pre class="cpp">
 <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
 db <span class="operator">=</span> <span class="type"><a href="qsqldatabase.html" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html">QSqlDatabase</a></span><span class="operator">.</span><a href="qsqldatabase.html#addDatabase" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#addDatabase">addDatabase</a>(<span class="string">"QODBC"</span>);
 db<span class="operator">.</span>setDatabaseName(<span class="string">"DRIVER={Microsoft Access Driver (*.mdb)};FIL={MS Access};DBQ=myaccessfile.mdb"</span>);
 <span class="keyword">if</span> (db<span class="operator">.</span>open()) {
     <span class="comment">// success!</span>
 }
 <span class="operator">.</span><span class="operator">.</span><span class="operator">.</span>
</pre>
<p>没有默认值。</p>
<p><b>See also</b> <a href="qsqldatabase.html#databaseName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#databaseName">databaseName</a>（ ）<a href="qsqldatabase.html#setUserName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setUserName">setUserName</a>（ ）<a href="qsqldatabase.html#setPassword" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPassword">setPassword</a>（ ）<a href="qsqldatabase.html#setHostName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setHostName">setHostName</a>（ ）<a href="qsqldatabase.html#setPort" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPort">setPort</a>（ ）<a href="qsqldatabase.html#setConnectOptions" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setConnectOptions">setConnectOptions</a>（）和<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ） 。</p>


<h3 class="fn">
<a name="setHostName"></a>QSqlDatabase.setHostName (<i>self</i>, QString <i>host</i>)</h3>
<p>设置连接的主机名<i>host</i>。有效，主机名必须设置<i>before</i>该连接是<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">opened</a>。或者，您可以<a href="qsqldatabase.html#close" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#close">close</a>（ ）的连接，设置主机名，并调用<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ）一次。</p>
<p>没有默认值。</p>
<p><b>See also</b> <a href="qsqldatabase.html#hostName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#hostName">hostName</a>（ ）<a href="qsqldatabase.html#setUserName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setUserName">setUserName</a>（ ）<a href="qsqldatabase.html#setPassword" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPassword">setPassword</a>（ ）<a href="qsqldatabase.html#setDatabaseName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setDatabaseName">setDatabaseName</a>（ ）<a href="qsqldatabase.html#setPort" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPort">setPort</a>（ ）<a href="qsqldatabase.html#setConnectOptions" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setConnectOptions">setConnectOptions</a>（）和<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ） 。</p>


<h3 class="fn">
<a name="setNumericalPrecisionPolicy"></a>QSqlDatabase.setNumericalPrecisionPolicy (<i>self</i>, <a href="qsql.html#NumericalPrecisionPolicy-enum" tppabs="http://pyqt4doc.appspot.com/qsql.html#NumericalPrecisionPolicy-enum">QSql.NumericalPrecisionPolicy</a> <i>precisionPolicy</i>)</h3>
<p>设置使用这个数据库连接创建查询的默认数值精度的政策<i>precisionPolicy</i>。</p>
<p>注意：不支持用低精度取数值的驱动程序将忽略精度政策。您可以使用<a href="qsqldriver.html#hasFeature" tppabs="http://pyqt4doc.appspot.com/qsqldriver.html#hasFeature">QSqlDriver.hasFeature</a>（ ）来找出驱动程序是否支持此功能。</p>
<p>注意：默认精度策略设置来<i>precisionPolicy</i>不影响任何当前活动的查询。</p>
<p>此功能被引入Qt的4.6 。</p>
<p><b>See also</b> <a href="qsql.html#NumericalPrecisionPolicy-enum" tppabs="http://pyqt4doc.appspot.com/qsql.html#NumericalPrecisionPolicy-enum">QSql.NumericalPrecisionPolicy</a>，<a href="qsqldatabase.html#numericalPrecisionPolicy" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#numericalPrecisionPolicy">numericalPrecisionPolicy</a>（ ）<a href="qsqlquery.html#setNumericalPrecisionPolicy" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html#setNumericalPrecisionPolicy">QSqlQuery.setNumericalPrecisionPolicy</a>（）和<a href="qsqlquery.html#numericalPrecisionPolicy" tppabs="http://pyqt4doc.appspot.com/qsqlquery.html#numericalPrecisionPolicy">QSqlQuery.numericalPrecisionPolicy</a>（ ） 。</p>


<h3 class="fn">
<a name="setPassword"></a>QSqlDatabase.setPassword (<i>self</i>, QString <i>password</i>)</h3>
<p>设置连接的密码<i>password</i>。有效果，必须设置密码<i>before</i>该连接是<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">opened</a>。或者，您可以<a href="qsqldatabase.html#close" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#close">close</a>（ ）的连接，设置密码，并调用<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ）一次。</p>
<p>没有默认值。</p>
<p><b>Warning:</b>此功能会将密码中的Qt纯文本。使用<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ）调用，需要一个密码作为参数，以避免这种行为。</p>
<p><b>See also</b> <a href="qsqldatabase.html#password" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#password">password</a>（ ）<a href="qsqldatabase.html#setUserName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setUserName">setUserName</a>（ ）<a href="qsqldatabase.html#setDatabaseName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setDatabaseName">setDatabaseName</a>（ ）<a href="qsqldatabase.html#setHostName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setHostName">setHostName</a>（ ）<a href="qsqldatabase.html#setPort" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPort">setPort</a>（ ）<a href="qsqldatabase.html#setConnectOptions" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setConnectOptions">setConnectOptions</a>（）和<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ） 。</p>


<h3 class="fn">
<a name="setPort"></a>QSqlDatabase.setPort (<i>self</i>, int <i>p</i>)</h3>
<p>设置连接的端口号<i>port</i>。有效的端口号必须设置<i>before</i>该连接是<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">opened</a>。或者，您可以<a href="qsqldatabase.html#close" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#close">close</a>（ ）的连接，设置端口号，并调用<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ）再次..</p>
<p>没有默认值。</p>
<p><b>See also</b> <a href="qsqldatabase.html#port" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#port">port</a>（ ）<a href="qsqldatabase.html#setUserName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setUserName">setUserName</a>（ ）<a href="qsqldatabase.html#setPassword" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPassword">setPassword</a>（ ）<a href="qsqldatabase.html#setHostName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setHostName">setHostName</a>（ ）<a href="qsqldatabase.html#setDatabaseName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setDatabaseName">setDatabaseName</a>（ ）<a href="qsqldatabase.html#setConnectOptions" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setConnectOptions">setConnectOptions</a>（）和<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ） 。</p>


<h3 class="fn">
<a name="setUserName"></a>QSqlDatabase.setUserName (<i>self</i>, QString <i>name</i>)</h3>
<p>设置连接的用户名<i>name</i>。有效果，用户名必须设置<i>before</i>该连接是<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">opened</a>。或者，您可以<a href="qsqldatabase.html#close" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#close">close</a>（ ）的连接，设置用户名和调用<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ）一次。</p>
<p>没有默认值。</p>
<p><b>See also</b> <a href="qsqldatabase.html#userName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#userName">userName</a>（ ）<a href="qsqldatabase.html#setDatabaseName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setDatabaseName">setDatabaseName</a>（ ）<a href="qsqldatabase.html#setPassword" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPassword">setPassword</a>（ ）<a href="qsqldatabase.html#setHostName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setHostName">setHostName</a>（ ）<a href="qsqldatabase.html#setPort" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setPort">setPort</a>（ ）<a href="qsqldatabase.html#setConnectOptions" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setConnectOptions">setConnectOptions</a>（）和<a href="qsqldatabase.html#open" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#open">open</a>（ ） 。</p>


<h3 class="fn">
<a name="tables"></a>QStringList QSqlDatabase.tables (<i>self</i>, <a href="qsql.html#TableType-enum" tppabs="http://pyqt4doc.appspot.com/qsql.html#TableType-enum">QSql.TableType</a> <i>type</i> = QSql.Tables)</h3>
<p>返回数据库的表，系统表和视图的列表，所指定的参数<i>type</i>。</p>
<p><b>See also</b> <a href="qsqldatabase.html#primaryIndex" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#primaryIndex">primaryIndex</a>（）和<a href="qsqldatabase.html#record" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#record">record</a>（ ） 。</p>


<h3 class="fn">
<a name="transaction"></a>bool QSqlDatabase.transaction (<i>self</i>)</h3>
<p>开始一个事务在数据库上，如果驱动程序支持的交易。回报<tt>true</tt>如果操作成功。否则返回<tt>false</tt>。</p>
<p><b>See also</b> <a href="qsqldriver.html#hasFeature" tppabs="http://pyqt4doc.appspot.com/qsqldriver.html#hasFeature">QSqlDriver.hasFeature</a>（ ）<a href="qsqldatabase.html#commit" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#commit">commit</a>（）和<a href="qsqldatabase.html#rollback" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#rollback">rollback</a>（ ） 。</p>


<h3 class="fn">
<a name="userName"></a>QString QSqlDatabase.userName (<i>self</i>)</h3>
<p>返回连接的用户名，它可能是空的。</p>
<p><b>See also</b> <a href="qsqldatabase.html#setUserName" tppabs="http://pyqt4doc.appspot.com/qsqldatabase.html#setUserName">setUserName</a>（ ） 。</p>


<address>
<div class="ad">
<br> 
<br><hr>
</div>
<div align="center"><table border="0" cellspacing="0" width="100%"><tr class="address">
<td align="left" width="25%">PyQt 4.10.3 for X11</td>
<td align="center" width="50%">Copyright © <a href="http://www.riverbankcomputing.com/">Riverbank Computing Ltd</a> and <a href="http://www.qtsoftware.com/">Nokia</a> 2012</td>
<td align="right" width="25%">Qt 4.8.5</td>
</tr></table></div>
</address>
</body>
</html>